import logging
from aiogram import Router, F
from aiogram.types import Message, CallbackQuery
from aiogram.filters import Command, CommandStart
from controllers.keyboards.inline import main_menu,get_main_kb,training_menu

router = Router()
logger = logging.getLogger(__name__)


@router.message(CommandStart())
async def cmd_start(msg: Message):
    welcome_text = """
üë®‚Äç‚öïÔ∏è **–°–ò–ú–£–õ–Ø–¢–û–† –î–õ–Ø –í–†–ê–ß–ï–ô BFU**

üéØ **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –±–æ—Ç–∞:**

‚Ä¢ **üè• –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞** ‚Äî –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∫–µ–π—Å—ã —Å –ø–∞—Ü–∏–µ–Ω—Ç–∞–º–∏
‚Ä¢ **ü§ñ –†–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π –¥–∏–∞–ª–æ–≥** ‚Äî GigaChat –∏–º–∏—Ç–∏—Ä—É–µ—Ç –ø–∞—Ü–∏–µ–Ω—Ç–∞  
‚Ä¢ **ü©∫ –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏–∞–≥–Ω–æ–∑–∞** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ü–µ–Ω–∫–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏
‚Ä¢ **üìä –ö–∞—Ä—Ç–æ—á–∫–∏ –±–æ–ª–µ–∑–Ω–µ–π** ‚Äî –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏ –∫—Ä–∏—Ç–µ—Ä–∏–∏

**üìã –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
‚Ä¢ `/–∑–∞–≤–µ—Ä—à–∏—Ç—å` ‚Äî –≤—ã–π—Ç–∏ –∏–∑ –¥–∏–∞–ª–æ–≥–∞ –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç
‚Ä¢ `/–¥–∏–∞–≥–Ω–æ–∑` ‚Äî —Å—Ä–∞–∑—É –ø–µ—Ä–µ–π—Ç–∏ –∫ –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–µ –¥–∏–∞–≥–Ω–æ–∑–∞  
‚Ä¢ `/start` ‚Äî –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é

**–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏:**
    """

    await msg.answer(
        welcome_text,
        reply_markup=get_main_kb(),
        parse_mode="Markdown"
    )


@router.message(F.text == "‚ÑπÔ∏è –ü–æ–º–æ—â—å")
@router.message(Command("help"))
async def cmd_help(msg: Message):
    help_text = """
**üìñ –ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Å–∏–º—É–ª—è—Ç–æ—Ä–æ–º:**

1Ô∏è‚É£ **–ù–∞—á–Ω–∏—Ç–µ** ‚Äî `/start` ‚Üí "üè• –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞"
2Ô∏è‚É£ **–í—ã–±–µ—Ä–∏—Ç–µ** –±–æ–ª–µ–∑–Ω—å –∏–∑ —Å–ø–∏—Å–∫–∞  
3Ô∏è‚É£ **–û–ø—Ä–∞—à–∏–≤–∞–π—Ç–µ** –ø–∞—Ü–∏–µ–Ω—Ç–∞ (–æ–±—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç)
4Ô∏è‚É£ **–ó–∞–≤–µ—Ä—à–∏—Ç–µ** ‚Äî `/–∑–∞–≤–µ—Ä—à–∏—Ç—å` –∏–ª–∏ `/–¥–∏–∞–≥–Ω–æ–∑`
5Ô∏è‚É£ **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ** –¥–∏–∞–≥–Ω–æ–∑ ‚Äî –Ω–∞–ø–∏—à–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –±–æ–ª–µ–∑–Ω–∏

**üí° –ö–æ–º–∞–Ω–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç –í –õ–Æ–ë–û–ô –ú–û–ú–ï–ù–¢ –¥–∏–∞–ª–æ–≥–∞:**
‚Ä¢ `/–∑–∞–≤–µ—Ä—à–∏—Ç—å` ‚Äî —Å–±—Ä–æ—Å ‚Üí –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
‚Ä¢ `/–¥–∏–∞–≥–Ω–æ–∑` ‚Äî —Å—Ä–∞–∑—É –∫ –ø—Ä–æ–≤–µ—Ä–∫–µ
‚Ä¢ `/start` ‚Äî –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é

**‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–µ!**
    """

    await msg.answer(help_text, parse_mode="Markdown")


@router.message(Command("start"))
@router.callback_query(F.data == "start")
async def start(msg_or_cb):

    await msg_or_cb.answer(
        "üë®‚Äç‚öïÔ∏è **–°–ò–ú–£–õ–Ø–¢–û–† –î–õ–Ø –í–†–ê–ß–ï–ô BFU**",
        reply_markup=main_menu()
    )
@router.message(F.text == "üè• –¢—Ä–µ–Ω–∞–∂–µ—Ä")
async def trainer_button(msg: Message):
    logger.info("Trainer button pressed by user_id=%s", msg.from_user.id)
    await msg.answer(
        "ü©∫ **–í—ã–±–µ—Ä–∏—Ç–µ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç—Ä–∞–±–æ—Ç–∫–∏:**",
        reply_markup=training_menu()
    )

